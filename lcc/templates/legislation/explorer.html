{% extends "index.html" %}

{% load static %}

{% block extra-scripts %}
  <script src="{% static "js/legislation_filter.js" %}"> </script>
  <script src="{% static "js/sidebar.js" %}"> </script>
{% endblock %}

{% block content-wrapper-class %}leg-viz with-sidebar{% endblock %}

{% block page-title %}Legislation Explorer{% endblock %}

{% block page-menu %}
<ul>
    <li><a href="{% url 'lcc:legislation:add' %}" class="btn btn-primary">Add legislation</a></li>
</ul>
{% endblock %}


{% block breadcrumbs %}{% endblock %}

{% block content %}
  <div class="search">
    <div class="row">
      <div class="input-group searchInputGroup">
        <div class="input-group searchInputWrapper">
          <input id="textSearchInput" type="text" name="q" placeholder="Search through all legislation database">
        </div>
        <div class="input-group-btn legalAreaBtnWrapper">
          <button id="classificationsDropDownToggler" type="button" class="btn btn-select" aria-haspopup="true" aria-expanded="false">
            <span style="float: left;">Select Legal Area</span>
            <span style="float: right;">â–¼<span style="padding: 0 4px 0 4px"><span class="caret"></span></span></span>
          </button>
        </div><!-- /btn-group -->
        <div class="input-group-btn searchBtnWrapper">
          <button class="btn btn-primary submitBtn" type="button"><i class="fa fa-search" aria-hidden="true"></i> Search</button>
        </div><!-- /btn-group -->
      </div><!-- /input-group -->
    </div><!-- /row -->
    <div class="row">
      <div class="col-md-6"></div>
      <div class="col-md-6">
        <div id="classificationsDropDownWrapper" style="display: none;">
          <select class="round" name="classifications" id="classificationsDropDown" multiple="multiple">
            {% for top in top_classifications %}
              <option value="{{ top.pk }}">
                {{ top.name }} ({{ top.get_descendant_count }} results)
              </option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div><!-- /row -->
  </div><!-- /search -->
<div class="page-container half viz-container">
    {% include "./_laws.html" %}
</div>
<div class="page-container half viz-container right">
  <h4>Filter legislation</h4>

    <div class="filter-item filter-countries">
    <label for="countryDropDown"><b>Country</b></label>
      <select class="round" name="country" id="countryDropDown">
        <option value="" selected>Select Country</option>
        {% for country in countries %}
          <option value="{{country.iso}}">{{ country.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="filter-item filter-type">
    <label for="typeDropDown"><b>Type</b></label>
      <select class="round" name="type" id="typeDropDown">
        <option value="" selected>Select type</option>
        {% for key, value in legislation_type %}
          <option value="{{key}}">{{ value }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="filter-item filterTags">
    <label for="TagDropDown"><b>Tags</b></label>
      <select class="round" name="tags" id="TagDropDown" multiple="multiple">
        {% for group_tag in group_tags %}
          <optgroup label="{{group_tag.name}}">
            {% for tag in group_tag.tags.all %}
              <option value="{{tag.pk}}" class="option-child-1">{{ tag.name }}</option>
            {% endfor %}
          </optgroup>
        {% endfor %}
      </select>
    </div>

    <div class="button-wrapper">
      <button type="button" class="btn btn-primary submitBtn">Apply filters</button>
    </div>

  </div>

{% endblock %}

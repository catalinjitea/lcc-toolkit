{% extends "legislation/explorer.html" %}
{% load static %}

{% block page-title %}{{ law.title }}{% endblock %}
{% block law_details %}
  {% include 'legislation/law_details.html' %}
{% endblock %}


{% block page-menu %} 
  <!-- {% include 'legislation/navigation.html' %} -->
  <ul>
    <li class="wide"><a href="{% url 'lcc:legislation:details' legislation_pk=law.pk %}" class="btn btn-link active">Overview</a></li>
    {% with law.articles.all as articles %}
    <li class="wide"><a href="{% url 'lcc:legislation:articles:view' legislation_pk=law.pk %}" class="btn btn-link {% if not articles %}disabled{% endif %}" title="{% if not articles %}This legislation does not have any articles defined.{% endif %}">Articles</a></li>
    {% endwith %}
    {% if request.user.is_authenticated %}
      <span class="separator"></span>
      <li class="wide">
        <a class="btn btn-link"
           href="{% url 'lcc:legislation:edit' legislation_pk=law.pk %}">
          Edit Legislation
        </a>
      </li>
      <li class="wide">
        <a class="btn btn-link">
          Delete Legislation
        </a>
      </li>
      <li class="wide">
        <a class="btn btn-link"
           href="{% url 'lcc:legislation:articles:add' legislation_pk=law.pk %}">
          Add articles
        </a>
      </li>
  {% endif %}
</ul>
{% endblock %}

{% block breadcrumbs %}
  {{ block.super }}
  <span> <i class="icon-right-open-mini"></i>{{ law.title }}</span>
{% endblock %}


{% block body-layout-type %}extended{% endblock %}

{% block content %}

{% with law.other_legislations as other_legislations %}

  <div class="page-container {% if other_legislations %}half{% endif %} viz-container">

    <div class="dl">
      <div class="dd"><span>Country</span></div>
      <div class="dt">
      {% static "" as baseUrl %}
        <img class="flag" src="{{ baseUrl }}/img/flags/{{ law.country.iso |lower }}.svg">
        <span>{{ law.country.name }}</span>
      </div>
    </div>

    <div class="dl">
      <div class="dd"><span>Document type</span></div>
      <div class="dt">{% if law.law_type %}{{ law.law_type }}{% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Date</span></div>
      <div class="dt">{% if law.year %}{{ law.year }}{% else %} - {% endif %} {% if law.year_amendment %}(latest known amendment {{ law.year_amendment}}){% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Geographical Coverage</span></div>
      <div class="dt">{% if law.geo_coverage %}{{ law.get_geo_coverage_display }}{% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Language</span></div>
      <div class="dt">{% if law.language %}{{ law.get_language_display }}{% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Original document</span></div>
      <div class="dt"><a href="{{ law.pdf_file.url }}" target="_blank">{{ law.pdf_file_name }}</a></div>
    </div>

    <div class="dl">
      <div class="dd"><span>Abstract</span></div>
      <div class="dt">{% if law.abstract %}<pre>{{ law.abstract }}</pre>{% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Classification</span></div>
      <div class="dt">
      {% if law.all_classifications %}
        {% for classification in law.classifications.all %}
         <span class="tag">{{ classification.name }}</span>
        {% endfor %}
      {% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Tags</span></div>
      <div class="dt">
      {% if law.all_tags %}
        {% for tag in law.tags.all%}
         <span class="tag">{{ tag.name }}</span>
        {% endfor %}
      {% else %} - {% endif %}</div>
    </div>


    <div class="dl">
      <div class="dd"><span>Additional date details</span></div>
      <div class="dt">{% if law.year_mention %}{{ law.year_mention }}{% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Website</span></div>
      <div class="dt">{% if law.website %}<a href="{{ law.website }}">{{ law.website }}</a>{% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Source</span></div>
      <div class="dt">{% if law.source %}{{ law.source }}{% else %} - {% endif %}</div>
    </div>

    <div class="dl">
      <div class="dd"><span>Type of source</span></div>
      <div class="dt">{% if law.source_type %}{{ law.get_source_type_display }}{% else %} - {% endif %}</div>
    </div>
  </div>

  {% if other_legislations %}
    <div class="page-container half right viz-container">
      {% for classification, legislations in other_legislations.items %}
        {% if legislations %}
          <div class="other-results-wrapper">
            <div class="section-header">
              <span class="icon-level-down"></span><span>Other results in </span><span class="result">{{ classification.name }}</span>
            </div>
            <ul>
              {% for legislation in legislations %}
                <li>
                  <a href="{% url 'lcc:legislation:details' legislation_pk=legislation.pk %}">
                   {{ legislation.title }}
                  </a>
                  <div>{{ legislation.country }} | {{ legislation.year }}</div>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}

{% endwith %}
{% endblock %}
{% extends "legislation/explorer.html" %}

{% load static %}

{% block page-title %}Articles{% endblock %}
{% block page-menu %}
  {% include 'legislation/navigation.html' %}
{% endblock %}

{% block breadcrumbs %}
  {{ block.super }}
  <span> <i class="icon-right-open-mini"></i><a href="{% url 'lcc:legislation:details' legislation_pk=law.pk %}">{{ law.title }}</a></span>
  <span> <i class="icon-right-open-mini"></i>Articles</span>
{% endblock %}

{% block content %}
<h3>
  {% static "" as baseUrl %}
  <img style="margin-right: .5rem;
    margin-top: -.5rem;
    width: 31px;"
    class="flag" src="{{ baseUrl }}img/flags/{{ law.country.iso |lower }}.svg" >{{ law.title }}
</h3>
<div class="articles-container">
{% for article in articles %}
  <div class="viz-container multiple">
    <a class="btn btn-info pull-right" href="{% url 'lcc:legislation:articles:edit' legislation_pk=law.pk article_pk=article.pk %}">Edit</a>
    {% if request.user.is_authenticated %}
      <a class="btn btn-danger pull-right" href="{% url 'lcc:legislation:articles:delete' legislation_pk=law.pk article_pk=article.pk %}" onclick="return confirm('Are you sure you want to delete this?')">Delete</a>
    {% endif %}

    {% if article.code %}
    <a href="#{{article.code}}">
      <h4 id="{{article.code}}">{{ article.code }}</h4>
    </a>
    {% endif %}

    {% if article.text %}
      <p><pre>{{ article.text }}</pre></p>
    {% endif %}

    <div class="dl">
        <div class="dd"><span>Classification</span></div>
        <div class="dt">
        {% if article.all_classifications %}
          {% for classification in article.classifications.all %}
           <span class="classification">{{ classification.name }}</span>
          {% endfor %}
        {% else %} - {% endif %}</div>
      </div>

      <div class="dl">
        <div class="dd"><span>Tags</span></div>
        <div class="dt">
        {% if article.all_tags %}
          {% for tag in article.tags.all%}
           <span class="tag">{{ tag.name }}</span>
          {% endfor %}
        {% else %} - {% endif %}</div>
      </div>

  </div>
{% empty %}
<p>This law does not have articles.</p>
{% endfor %}
</div>
<div class="button-wrapper" style="margin:1rem 0;">
  <a class="btn btn-primary" href="{% url 'lcc:legislation:explorer' %}">View all legislations</a>
  <a class="btn btn-primary" href="{% url 'lcc:legislation:articles:add' legislation_pk=law.pk %}">Add articles</a>
</div>
{% endblock %}

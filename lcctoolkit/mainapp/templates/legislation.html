{% extends "index.html" %}

{% load static %}

{% block extra-scripts %}
  <script src="{% static "js/legislation_filter.js" %}"> </script>
{% endblock %}

{% block content-title %}
{% endblock %}

{% block content %}
  <div style="margin-bottom:28px;">
    <a href="/legislation/add/" class="btn btn-info">Add legislation</a>
  </div>

  <div id="laws">
      {% for law in laws %}
        <div class="law-container">
          <a href="{% url 'legislation_details' law.pk %}"><h3>{{ law }} - {{ law.title }}</h3></a>
          <p class="law-country"><b>Country</b>: {{ law.country.name }}</p>
          <p class="law-tag"><b>Taxonomy Tags</b>: {{ law.all_tags }}</p>
          <p class="law-classification"><b>Taxonomy Classification</b>: {{ law.all_classifications }}</p>
        </div>
      {% endfor %}
  </div>

  <div class="filters">
    
    <div class="filter-tags">
      <select name="tags[]" id="TagDropDown" multiple="multiple">
        {% for group_tag in group_tags %}
          <optgroup label="{{group_tag.name}}">
            {% for tag in group_tag.tags.all %}
              <option value="{{tag.pk}}" class="option-child-1">{{ tag.name }}</option>
            {% endfor %}
          </optgroup>
        {% endfor %}
      </select>
    </div>

    <div class="filter-classifications">
      <select name="classifications[]" id="classificationsDropDown" multiple="multiple">
        {% for top_class in top_classifications %}
          <option value="{{top_class.pk}}" class="option-group">{{ top_class.name }}</option>
          {% for second_class in top_class.get_children %}
            <option value="{{second_class.pk}}" class="option-child-1">{{ second_class.name }}</option>
            {% for third_class in second_class.get_children %}
              <option value="{{third_class.pk}}" class="option-child-2">{{ third_class.name }}</option>
            {% endfor %}
          {% endfor %}
        {% endfor %}
      </select>
    </div>
    
    <div class="filter-countries">
      <select name="countries" id="countriesDropDown">
        {% for country in countries %}
          <option value="{{country.iso}}">{{ country.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="filter-type">
      <select name="type" id="typeDropDown">
        {% for key, value in legislation_type %}
          <option value="{{key}}">{{ value }}</option>
        {% endfor %}
      </select>
    </div>

    <button type="button" id="submitButton">Apply filters</button>

  </div>
{% endblock %}